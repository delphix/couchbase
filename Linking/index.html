
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../image/logo.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.15">
    
    
      
        <title>Linking - Couchbase Plugin</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.c382b1dc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cc9b2e1e.min.css">
        
          
          
          <meta name="theme-color" content="#02a6f2">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#linking" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Couchbase Plugin" class="md-header__button md-logo" aria-label="Couchbase Plugin" data-md-component="logo">
      
  <img src="../image/delphix-logo-black1x.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Couchbase Plugin
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Linking
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Couchbase Plugin" class="md-nav__button md-logo" aria-label="Couchbase Plugin" data-md-component="logo">
      
  <img src="../image/delphix-logo-black1x.svg" alt="logo">

    </a>
    Couchbase Plugin
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Requirements
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Requirements" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Requirements
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Requirements/SupportMatrix/" class="md-nav__link">
        Support Matrix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Requirements/Staging/" class="md-nav__link">
        Staging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Requirements/Target/" class="md-nav__link">
        Target
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Requirements/NetworkPorts/" class="md-nav__link">
        NetworkPorts
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Installation/" class="md-nav__link">
        Plugin Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Discovery/" class="md-nav__link">
        Discovery
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Linking
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Linking
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-dsource-using-xdcr" class="md-nav__link">
    Creating dSource using XDCR
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-dsource-using-backup" class="md-nav__link">
    Creating dSource using backup
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Provisioning/" class="md-nav__link">
        Provisioning
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Limitations/" class="md-nav__link">
        Limitations
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Release Notes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Release Notes" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Release Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_1" type="checkbox" id="__nav_8_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8_1">
          1.2.1
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="1.2.1" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_1">
          <span class="md-nav__icon md-icon"></span>
          1.2.1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Release_Notes/1.2.1/Release-v1.2.1/" class="md-nav__link">
        Release-v1.2.1
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-dsource-using-xdcr" class="md-nav__link">
    Creating dSource using XDCR
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-dsource-using-backup" class="md-nav__link">
    Creating dSource using backup
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="linking">Linking</h1>
<p>Linking a data source will create a dSource object on the engine and allow Delphix to ingest data from this source. The dSource is an object that the Delphix Virtualization Engine uses to create and update virtual copies of your database. </p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Staging environment created and source database configured in discovered repository</p>
<h2 id="creating-dsource-using-xdcr">Creating dSource using XDCR</h2>
<ol>
<li>Login to <strong>Delphix Management</strong> application.</li>
<li>Click <strong>Manage</strong> &gt;  <strong>Datasets</strong>.</li>
<li>Select <strong>Add dSource</strong>.</li>
<li>In the Add dSource wizard, select the Couchbase source configuration which is created on the staging host.</li>
<li>Enter the Couchbase-specific parameters for your dSource configuration.</li>
<li>Select the dSource type XDCR from the drop-down available on dSource wizard.</li>
<li>Based on approach selection, follow the steps either for XDCR or Couchbase Backup Manager method. The Description of both methods is below.</li>
<li>Enter the details for <strong>Staging Couchbase host</strong> - FQDN or IP address recommended.</li>
<li>Enter the details for <strong>Staging Port Number</strong> available on the staging host. The default port for couchbase is 8091.</li>
<li>Enter the details for <strong>Mount Path</strong> available on the staging host. This empty folder acts as a base for NFS mounts.</li>
<li>Enter the details for <strong>Staging Cluster Name</strong> to setup new cluster on the staging host.</li>
<li>
<p>Enter the configuration details for your staging cluster as per resource availability on the staging host.</p>
<ul>
<li>Cluster RAM Size</li>
<li>Cluster Index RAM Size</li>
<li>Cluster FTS RAM Size</li>
<li>Cluster Eventing RAM Size - this should be 0</li>
<li>Cluster Analysis RAM Size - this should be 0    </li>
</ul>
<p><img alt="Screenshot" src="../image/add_dsource_1.png" /></p>
</li>
<li>
<p>Enter the details for <strong>Staging Cluster Admin User</strong>  and <strong>Staging Cluster Admin Password</strong></p>
</li>
<li>
<p>Enter the details for <strong>Source Cluster Admin User</strong>  and <strong>Source Cluster Admin Password</strong></p>
<p><img alt="Screenshot" src="../image/add_dsource_2.png" /></p>
</li>
<li>
<p>If not all buckets needs to be replicated, click on <strong>+</strong> plus symbol to modify configuration settings. Mention bucket list for which cross datacenter replication (XDCR) only be enabled.<br />
<img alt="Screenshot" src="../image/image14.png" /></p>
</li>
<li>
<p>Enter the details of <strong>Bucket Name</strong> to be part of XDCR. Then click on <strong>Next</strong> button<br />
<img alt="Screenshot" src="../image/image15.png" /></p>
</li>
<li>
<p>Provide the details for <strong>dSource Name</strong> and <strong>Target group</strong> on the dSource configuration page.<br />
<img alt="Screenshot" src="../image/add_dsource_3.png" /></p>
</li>
<li>
<p>On the <strong>Data management</strong> page, select the following:</p>
<ul>
<li>Staging Environment: This will be your staging host where source config was created.</li>
<li>User: Database OS user with required privileges for linking the dataset.</li>
</ul>
<p><img alt="Screenshot" src="../image/add_dsource_4.png" /></p>
</li>
<li>
<p>On the next screens, configure a policy, hooks and review the configuration and click on <strong>Next</strong> button to view the summary.</p>
<p><img alt="Screenshot" src="../image/add_dsource_5.png" /></p>
<p><img alt="Screenshot" src="../image/add_dsource_6.png" /></p>
</li>
<li>
<p>Click the <strong>Submit</strong> button which will initiate the linking process.</p>
<p><img alt="Screenshot" src="../image/add_dsource_7.png" /></p>
</li>
<li>
<p>Once dSource is created successfully, you can review the datasets on <strong>Manage</strong> &gt; <strong>Datasets</strong> &gt; <strong>dSource Name</strong>.  </p>
<p><img alt="Screenshot" src="../image/dsource_ingested.png" /></p>
</li>
</ol>
<h2 id="creating-dsource-using-backup">Creating dSource using backup</h2>
<p>Prerequisites:
Access to production backup with those ex. values:</p>
<p>/backup - archive</p>
<p>PROD - repository</p>
<div class="highlight"><pre><span></span><code> /opt/couchbase/bin/cbbackupmgr info -a /backup -r PROD
 Name  | Size     | # Backups  |
 PROD  | 58.03MB  | 1          |
 +  Backup                               | Size     | Type  | Source                              | Cluster UUID                      | Range  | Events  | Aliases  | Complete  |
 +  2022-01-10T11_29_26.465860528-05_00  | 58.03MB  | FULL  | http://couchbasesrc.dlpxdc.co:8091  | 08f7937a26b2d20178a5ed16d7a2dd1c  | N/A    | 0       | 0        | true      |
</code></pre></div>
<ol>
<li>Login to <strong>Delphix Management</strong> application.</li>
<li>Click <strong>Manage</strong> &gt;  <strong>Datasets</strong>.</li>
<li>Select <strong>Add dSource</strong>.</li>
<li>In the Add dSource wizard, select the Couchbase source configuration which is created on the staging host.</li>
<li>Enter the Couchbase-specific parameters for your dSource configuration.</li>
<li>Select the dSource type Couchbase Backup Manager from the drop-down available on dSource wizard.</li>
<li>Based on approach selection, follow the steps either for XDCR or Couchbase Backup Manager method. The Description of both methods is below.</li>
<li>Enter the details for <strong>Staging Couchbase host</strong> - FQDN or IP address recommended.</li>
<li>Enter the details for <strong>Staging Port Number</strong> available on the staging host. The default port for couchbase is 8091.</li>
<li>Enter the details for <strong>Backup Location</strong> available on the staging host. </li>
<li>Enter the details for <strong>Backup repository</strong> </li>
<li>Enter the details for <strong>Mount Path</strong> available on the staging host. This empty folder acts as a base for NFS mounts.</li>
<li>Enter the details for <strong>Staging Cluster Name</strong> to setup new cluster on the staging host.</li>
<li>
<p>Enter the configuration details for your staging cluster as per resource availability on the staging host.</p>
<ul>
<li>Cluster RAM Size</li>
<li>Cluster Index RAM Size</li>
<li>Cluster FTS RAM Size</li>
<li>Cluster Eventing RAM Size - this should be 0</li>
<li>Cluster Analysis RAM Size - this should be 0    </li>
</ul>
<p><img alt="Screenshot" src="../image/add_dsource_1backup.png" /></p>
</li>
<li>
<p>Enter the details for <strong>Staging Cluster Admin User</strong>  and <strong>Staging Cluster Admin Password</strong></p>
</li>
<li>
<p>Enter dummy values for <strong>Source Cluster Admin User</strong>  and <strong>Source Cluster Admin Password</strong> - they are not used</p>
<p><img alt="Screenshot" src="../image/add_dsource_2backup.png" /></p>
</li>
<li>
<p>Then click on <strong>Next</strong> button  </p>
</li>
<li>
<p>Provide the details for <strong>dSource Name</strong> and <strong>Target group</strong> on the dSource configuration page.<br />
<img alt="Screenshot" src="../image/add_dsource_3.png" /></p>
</li>
<li>
<p>On the <strong>Data management</strong> page, select the following:</p>
<ul>
<li>Staging Environment: This will be your staging host where source config was created.</li>
<li>User: Database OS user with required privileges for linking the dataset.</li>
</ul>
<p><img alt="Screenshot" src="../image/add_dsource_4.png" /></p>
</li>
<li>
<p>On the next screens, configure a policy, hooks and review the configuration and click on <strong>Next</strong> button to view the summary.</p>
<p><img alt="Screenshot" src="../image/add_dsource_5.png" /></p>
<p><img alt="Screenshot" src="../image/add_dsource_6.png" /></p>
</li>
<li>
<p>Click the <strong>Submit</strong> button which will initiate the linking process.</p>
<p><img alt="Screenshot" src="../image/add_dsource_7backup.png" /></p>
</li>
<li>
<p>Once dSource is created successfully, you can review the datasets on <strong>Manage</strong> &gt; <strong>Datasets</strong> &gt; <strong>dSource Name</strong>.  </p>
<p><img alt="Screenshot" src="../image/dsource_ingested.png" /></p>
</li>
</ol>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../Discovery/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Discovery" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Discovery
            </div>
          </div>
        </a>
      
      
        
        <a href="../Provisioning/" class="md-footer__link md-footer__link--next" aria-label="Next: Provisioning" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Provisioning
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.a6c66575.min.js"></script>
      
    
  </body>
</html>